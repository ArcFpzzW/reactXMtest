{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\93095\\\\Desktop\\\\\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\\\\reactXMtest\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar initState = {\n  joke_list: localStorage.joke_list ? JSON.parse(localStorage.joke_list).joke_list : []\n};\n\nconst reducer = (state = initState, action) => {\n  let newState = _objectSpread({}, state);\n\n  console.log(newState); //添加到购物车\n  //1,购物车为空，push  2.有商品  ，查找到这个商品 数量加1  3. 没找到，push \n\n  if (action.type === \"ADD\") {\n    if (newState.joke_list.length === 0) {\n      newState.joke_list.push(action.obj);\n    } else {\n      var flag = false; //表示添加的商品购物车里没有\n\n      newState.joke_list.forEach(item => {\n        if (item.id === action.obj.id) {\n          item.count += 0;\n          flag = true;\n        }\n      });\n      if (!flag) newState.joke_list.push(action.obj);\n    }\n  } else if (action.type === \"CHANGE\") {\n    newState.joke_list.forEach(item => {\n      if (item.id === action.id) {\n        item.flag = !item.flag;\n      }\n    });\n  }\n\n  localStorage.joke_list = JSON.stringify(newState);\n  return newState;\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:\\Users\\93095\\Desktop\\新建文件夹\\reactXMtest\\src\\components\\third\\reducer.js"],"names":["initState","joke_list","localStorage","JSON","parse","reducer","state","action","newState","console","log","type","length","push","obj","flag","forEach","item","id","count","stringify"],"mappings":";AAAA,IAAIA,SAAS,GAAE;AACdC,EAAAA,SAAS,EAACC,YAAY,CAACD,SAAb,GAAuBE,IAAI,CAACC,KAAL,CAAWF,YAAY,CAACD,SAAxB,EAAmCA,SAA1D,GAAoE;AADhE,CAAf;;AAKA,MAAMI,OAAO,GAAG,CAACC,KAAK,GAACN,SAAP,EAAiBO,MAAjB,KAA0B;AACzC,MAAIC,QAAQ,qBAAMF,KAAN,CAAZ;;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAFyC,CAGtC;AACA;;AACA,MAAGD,MAAM,CAACI,IAAP,KAAc,KAAjB,EAAuB;AACtB,QAAGH,QAAQ,CAACP,SAAT,CAAmBW,MAAnB,KAA4B,CAA/B,EAAiC;AAChCJ,MAAAA,QAAQ,CAACP,SAAT,CAAmBY,IAAnB,CAAwBN,MAAM,CAACO,GAA/B;AACA,KAFD,MAGI;AACH,UAAIC,IAAI,GAAC,KAAT,CADG,CACc;;AACjBP,MAAAA,QAAQ,CAACP,SAAT,CAAmBe,OAAnB,CAA4BC,IAAD,IAAQ;AAClC,YAAGA,IAAI,CAACC,EAAL,KAAUX,MAAM,CAACO,GAAP,CAAWI,EAAxB,EAA2B;AAC1BD,UAAAA,IAAI,CAACE,KAAL,IAAY,CAAZ;AACAJ,UAAAA,IAAI,GAAC,IAAL;AACA;AACD,OALD;AAMA,UAAG,CAACA,IAAJ,EAAUP,QAAQ,CAACP,SAAT,CAAmBY,IAAnB,CAAwBN,MAAM,CAACO,GAA/B;AACV;AACD,GAdD,MAgBK,IAAGP,MAAM,CAACI,IAAP,KAAc,QAAjB,EAA0B;AAC7BH,IAAAA,QAAQ,CAACP,SAAT,CAAmBe,OAAnB,CAA4BC,IAAD,IAAQ;AACnC,UAAGA,IAAI,CAACC,EAAL,KAAUX,MAAM,CAACW,EAApB,EAAuB;AACtBD,QAAAA,IAAI,CAACF,IAAL,GAAU,CAACE,IAAI,CAACF,IAAhB;AACA;AACD,KAJA;AAKD;;AACJb,EAAAA,YAAY,CAACD,SAAb,GAAuBE,IAAI,CAACiB,SAAL,CAAeZ,QAAf,CAAvB;AACA,SAAOA,QAAP;AACA,CA9BD;;AA+BA,eAAgBH,OAAhB","sourcesContent":["var initState ={\r\n\tjoke_list:localStorage.joke_list?JSON.parse(localStorage.joke_list).joke_list:[]\r\n}\r\n\r\n\r\nconst reducer = (state=initState,action)=>{\r\n\tlet newState ={...state};\r\n\tconsole.log(newState)\r\n    //添加到购物车\r\n    //1,购物车为空，push  2.有商品  ，查找到这个商品 数量加1  3. 没找到，push \r\n    if(action.type===\"ADD\"){\r\n    \tif(newState.joke_list.length===0){\r\n    \t\tnewState.joke_list.push(action.obj);\t\r\n    \t}\r\n    \telse{\r\n\t    \tvar flag=false;  //表示添加的商品购物车里没有\r\n\t    \tnewState.joke_list.forEach((item)=>{\r\n\t    \t\tif(item.id===action.obj.id){\r\n\t    \t\t\titem.count+=0;\r\n\t    \t\t\tflag=true;\r\n\t    \t\t}\r\n\t    \t})\r\n\t    \tif(!flag) newState.joke_list.push(action.obj);\r\n    \t}\r\n    }\r\n   \r\n    else if(action.type===\"CHANGE\"){\r\n    \t newState.joke_list.forEach((item)=>{\r\n    \t\tif(item.id===action.id){\r\n    \t\t\titem.flag=!item.flag;\r\n    \t\t}\r\n    \t})\r\n    }\r\n\tlocalStorage.joke_list=JSON.stringify(newState);\r\n\treturn newState;\r\n}\r\nexport default  reducer;\r\n"]},"metadata":{},"sourceType":"module"}